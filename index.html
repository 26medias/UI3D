<!DOCTYPE HTML>
<html lang="en-US">
	<head>
		<title></title>
		<meta charset="UTF-8">
		<script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/1.13.1/TweenMax.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
		<script src="ui3d.js"></script>
		<link rel="stylesheet/less" type="text/css" href="ui3d.less" />
		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.7.0/less.min.js"></script>
	</head>
	<body class="ui3d">
		
		<div class="ui3d-box">
			<input type="text" id="setval" />
			<div id="btnset">set</div>
		</div>
		
		<div class="ui3d-box medium" id="box01">
			01
		</div>
		<div class="ui3d-box medium" id="box02">
			02
		</div>
		<div class="ui3d-box medium" id="box03">
			03
		</div>
		
		<script type="text/javascript">
			
			function sinWave(seed, callback) {
				var counter = seed;
				var itv = setInterval(function() {
					counter += 5;
					if (counter >= 360) {
						counter = 0;
					}
					callback(Math.sin(counter*Math.PI/180)*100);
				}, 100);
				return {
					stop:	function() {
						clearInterval(itv);
					}
				};
			}
			
			$(function() {
				var boxbg 	= new window.ui3d.bg($('body'), 'http://i.imgur.com/NB7dSYB.jpg', {scaleUp: true, redraw: 'auto'});
				
				var box3d1 	= new window.ui3d.box($('#box01'), {
					duration:	0.5
				});
				box3d1.center(true, true);
				box3d1.options.duration = 0.1;
				var sin1 = sinWave(0, function(v) {box3d1.move({z:	v});});
				
				var box3d2 	= new window.ui3d.box($('#box02'), {
					duration:	0.5
				});
				box3d2.center(true, true);
				box3d2.options.duration = 0.1;
				var sin2 = sinWave(30, function(v) {box3d2.move({z:	v});});
				
				var box3d3 	= new window.ui3d.box($('#box03'), {
					duration:	0.5
				});
				box3d3.center(true, true);
				box3d3.options.duration = 0.1;
				var sin3 = sinWave(60, function(v) {box3d3.move({z:	v});});
				
				
				
				
				
				
				
				$('#btnset').click(function() {
					var val = $('#setval').val();
					console.log("set",val*1);
					box3d1.move({z:	val*1});
				});
				
			});
		</script>
	</body>
</html>
